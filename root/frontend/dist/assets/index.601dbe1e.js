var H=Object.defineProperty;var z=(t,n,o)=>n in t?H(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var l=(t,n,o)=>(z(t,typeof n!="symbol"?n+"":n,o),o);import{j as A,r as p,P as E,a as T,R as F,I as B,b as C,c as W,d as D,e as j,f as q,g as O,_ as J,A as U,h as $,i as K,k as Y,l as Q,C as P,F as X,v as Z,m as ee,n as I,S as te,o as ne,p as ae,q as R,s as se,B as oe}from"./vendor.71e51952.js";const re=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const m of s)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const m={};return s.integrity&&(m.integrity=s.integrity),s.referrerpolicy&&(m.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?m.credentials="include":s.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(s){if(s.ep)return;s.ep=!0;const m=o(s);fetch(s.href,m)}};re();const e=A.exports.jsx,a=A.exports.jsxs,G=A.exports.Fragment,ie=()=>{const[t,n]=p.exports.useState(!1),[o,c]=p.exports.useState(),[s,m]=p.exports.useState(""),[d,v]=p.exports.useState([]),[b,N]=p.exports.useState(!0),x=["H2_car"],g={};p.exports.useEffect(()=>{f()},[]);const f=()=>{const i=new E.Client("broker.mqttdashboard.com",Number(8e3),"/mqtt","myClientId"+new Date().getTime());i.onConnectionLost=k,i.onMessageArrived=M,i.connect({onSuccess:w}),c(i)},w=()=>{n(!0)},S=()=>{if(o==null||s==="")return;const i=new E.Message(s);i.destinationName="H2polito/Speed",console.log("Sending"),console.log(i.payloadString),o.send(i);let u=parseInt(s)+10;const V=new E.Message(JSON.stringify(u));V.destinationName="H2polito/Temperature",console.log("Sending"),console.log(V.payloadString),o.send(V),m("")},k=i=>{i.errorCode!==0&&console.log("onConnectionLost: "+i.errorMessage),n(!1)},M=i=>{var u=i.payloadString;u=String(u),v(V=>[...V,u])},h=()=>{if(o!=null)for(var i=0;i<x.length;i++)o.subscribe(x[i],g)},r=i=>{console.log("Message"),m(i.target.value)};return a(G,{children:[e("main",{className:"mb-auto mx-auto",children:a("div",{className:"text-center text-white justify-center",children:[b&&a("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:['Keep this home page and the /dashboard ON in two separate windows. To make it work, select a component in the dashboard section, add its values and select the sensor "Luci" and once the component has been added, press the "reload" button. Now you can try to send a message to the broker "h2politoLuci". This value will show up on the sensors that selected luci as a sensor.',e("span",{className:"float-right",children:e("button",{onClick:()=>N(!1),children:"Close"})})]}),t===!1&&a("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Ops! "}),e("span",{className:"block sm:inline",children:"You are not connected!"})]}),t===!0&&a("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Connected! "}),e("span",{className:"block sm:inline",children:"You are connected to the server!"})]}),e("p",{className:"font-bold underline text-green-700",children:"Messages:"}),d.length===0&&a("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Ops! "}),e("span",{className:"block sm:inline",children:"There are no messages to show! Subscribe to a topic first then send a message to test :)"})]}),d.map((i,u)=>a("div",{className:"bg-stone-100 border border-stone-400 text-stone-700 px-4 py-3 rounded relative",role:"alert",children:[a("strong",{className:"font-bold",children:["Message ",u]}),e("br",{}),e("span",{className:"block sm:inline",children:i})]},u))]})}),a("footer",{className:"mb-5",children:[e("p",{children:e("input",{type:"text",value:s,onChange:r,className:"placeholder:italic placeholder:text-grey-400 block bg-white w-full border border-gray-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm",placeholder:"Write a Message..."})}),e("button",{className:"w-1/2 h-10 text-sm text-white bg-yellow-400 rounded-tl-full rounded-bl-full hover:bg-yellow-300",onClick:h,children:e("h1",{children:"Subscribe Topic"})}),e("button",{className:"w-1/2 h-10 text-sm text-white bg-yellow-400 rounded-tr-full rounded-br-full hover:bg-yellow-300",onClick:S,children:e("h1",{children:"Send Message"})})]})]})},le=()=>e("div",{children:a("div",{className:"bg-stone-100 border border-stone-400 text-stone-700 px-4 py-3 rounded relative text-center",role:"alert",children:[e("strong",{className:"font-bold",children:"H2PolitO"}),e("br",{}),e("span",{className:"block sm:inline",children:"The idea of \u200B\u200Bforming a team for alternative propulsion vehicles at the Politecnico was born in 2006, but only in the autumn of 2007, under the strong ambition of a group of students and thanks to the indispensable help of eng. Giuliano Cozzari and the Faculty Advisor eng. Massimiliana Carello, turns into an operating team of 13 students, coming from 11 of the three-year degree courses. With the approval of the Rector of the Politectico, prof. Francesco Profumo and of the Head of Automotive Engineering, prof. Pietro Appendino, the project takes off."})]})}),ce=T.exports.WidthProvider(F),de=()=>e("div",{children:e(ce,{rowHeight:50,cols:12,className:"layout",children:[{compID:1,nameComponent:"",typeComponent:3,cmpMinRange:0,cmpMaxRange:100,sensorSelected:[{ID:"1",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:100}],prescaler:1,deleted:!1,value:0,w:6,h:6},{compID:2,nameComponent:"",typeComponent:3,cmpMinRange:0,cmpMaxRange:100,sensorSelected:[{ID:"2",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:100}],prescaler:1,deleted:!1,value:0,w:6,h:6},{compID:3,nameComponent:"Velocit\xE1",typeComponent:2,cmpMinRange:0,cmpMaxRange:40,sensorSelected:[{ID:"3",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:40}],prescaler:1,deleted:!1,value:0,w:3,h:6},{compID:4,nameComponent:"Strategia",typeComponent:4,cmpMinRange:0,cmpMaxRange:40,sensorSelected:[{ID:"4",topicName:"Strategy",sensorName:"Strategy",minValue:1,maxValue:40}],prescaler:1,deleted:!1,value:0,w:5,h:9}].map((n,o)=>e("div",{"data-grid":{x:0,y:0,w:n.w,h:n.h}},n.compID))})});B.register();class me extends C.Component{constructor(n){super(n);this.state={componentVisible:!0}}render(){return e("div",{children:a(W,{value:this.props.value,isNeedleDraggingEnabled:!1,isNeedleDraggingConstrained:!0,scaleStartExtent:.5,scaleEndExtent:.57,backingStrokeThickness:8,needleShape:"NeedleWithBulb",needleBrush:"#ff1230",needleOutline:"#9f9f9f",needleStrokeThickness:1,needlePivotShape:"CircleOverlay",needlePivotBrush:"#9f9f9f",needlePivotOutline:"#9f9f9f",needlePivotWidthRatio:.2,needlePivotStrokeThickness:1,height:"250px",minimumValue:this.props.minSpeed,maximumValue:this.props.maxSpeed,interval:(this.props.maxSpeed-this.props.minSpeed)/5,rangeBrushes:"#e3e3e3, #5bb551, #ffb638, red",rangeOutlines:"grey",children:[e(D,{name:"range1",startValue:this.props.minSpeed,endValue:.2*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(D,{name:"range2",startValue:.2*this.props.maxSpeed,endValue:.6*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(D,{name:"range3",startValue:.6*this.props.maxSpeed,endValue:.8*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(D,{name:"range4",startValue:this.props.maxSpeed*.8,endValue:this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57})]})})}}j.register();class pe extends C.Component{constructor(n){super(n);this.state={componentVisible:!0}}render(){return e("div",{children:a(q,{height:"120px",width:"100%",value:this.props.value,minimumValue:this.props.minVal,maximumValue:this.props.maxVal,interval:10,isScaleInverted:!1,backingOuterExtent:"Transparent",rangeBrushes:"#a4bd29, #F86232",rangeOutlines:"#a4bd29, #F86232",scaleEndExtent:.95,children:[e(O,{name:"range1",startValue:this.props.minVal,endValue:this.props.maxVal*.7,innerStartExtent:.075,innerEndExtent:.075,outerStartExtent:.25,outerEndExtent:.4}),e(O,{name:"range2",startValue:this.props.maxVal*.7,endValue:this.props.maxVal,innerStartExtent:.075,innerEndExtent:.075,outerStartExtent:.4,outerEndExtent:.55})]})})}}class he extends C.Component{constructor(n){super(n);this.state={componentVisible:!0}}render(){return a(G,{children:[this.props.status,e("div",{className:this.props.status?"bg-green-500":"bg-red-500",children:a("h1",{className:"text-center",children:[this.props.title,"\xA0"]})})]})}}class ue extends p.exports.Component{constructor(n){super(n);l(this,"myData",[]);l(this,"state",{avg:0,options:{chart:{height:"100%",id:this.props.id,animations:{enabled:!0,easing:"linear",speed:1,dynamicAnimation:{enabled:!0,speed:50}},toolbar:{show:!1},zoom:{enabled:!1}},annotations:{yaxis:[{y:0,borderColor:"blue",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Averge"}}]},xaxis:{type:"numeric",range:100},yaxis:{max:Number(this.props.maxVal),min:Number(this.props.minVal)},stroke:{curve:"smooth"}},series:this.props.sensorList.map(n=>({name:n.sensorName,data:[]})),newData:this.props.passedData});l(this,"idInt");l(this,"allData",[])}componentDidMount(){this.props.sensorList.forEach((n,o)=>{this.allData[o]=[]}),this.idInt=setInterval(()=>{this.state.avg=this.allData[0].reduce((n,o)=>n+o,0)/this.allData[0].length,this.allData.forEach((n,o)=>{this.state.avg=this.allData[0].reduce((c,s)=>c+s,0)/this.allData[0].length,this.state.options.annotations.yaxis[0].y=this.state.avg,n.push(this.props.passedData[o]),n.length>100&&n.shift()}),ApexCharts.exec(this.props.id,"updateSeries",this.allData.map((n,o)=>({data:this.allData[o]})))},500)}componentWillUnmount(){console.log("Unmount graph"),clearInterval(this.idInt)}render(){return e("div",{className:"app",children:e("div",{className:"row",children:e("div",{className:"mixed-chart",children:e(J,{options:this.state.options,series:this.state.series,type:"line",width:"100%"})})})})}}const ge={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiLineString",coordinates:[[[-.038333,43.7670631,5],[-.0383641,43.7670773,0],[-.0384355,43.7670778,0],[-.0387161,43.7671708,0],[-.0390553,43.7673015,0],[-.0391838,43.7673678,0],[-.0393128,43.767482,0],[-.0393648,43.7675436,0],[-.0394051,43.7676148,0],[-.0394266,43.7676649,0],[-.0394433,43.7677428,0],[-.039441,43.7678751,0],[-.0394301,43.7679163,0],[-.03939,43.7679958,0],[-.0392799,43.768153,0],[-.0389151,43.7686063,0],[-.0386111,43.7690158,0],[-.0385281,43.7691186,0],[-.0384705,43.7691745,0],[-.0384165,43.769214,0],[-.03835,43.7692471,0],[-.0382083,43.7692861,0],[-.0380865,43.7692946,0],[-.0379739,43.7692903,0],[-.0378016,43.7692678,0],[-.0376716,43.7692118,0],[-.037536,43.7691221,0],[-.0374096,43.769026,0],[-.0371731,43.7688671,0],[-.0367128,43.7685105,0],[-.0363385,43.7682691,0],[-.036181,43.768146,0],[-.035924,43.7679691,12],[-.0358156,43.7678603,12],[-.0357673,43.7677891,0],[-.0357576,43.7677128,0],[-.035776,43.7676471,0],[-.0357981,43.7676105,0],[-.035853,43.7675621,0],[-.0359396,43.7675215,0],[-.0360408,43.7675076,12],[-.0362601,43.7675086,12],[-.0365756,43.7675441,12],[-.036706,43.767586,12],[-.0368538,43.7676073,12],[-.0369638,43.7676451,0],[-.0370731,43.7677003,0],[-.0372155,43.7678048,0],[-.0373491,43.7680043,0],[-.0374818,43.7682841,0],[-.0375876,43.7684836,0],[-.0376726,43.7686793,0],[-.0377193,43.7687505,0],[-.0377833,43.7688175,0],[-.0378653,43.7688695,0],[-.0380011,43.768919,0],[-.0380515,43.7689258,0],[-.0381888,43.7689128,0],[-.0382335,43.7688996,0],[-.0382883,43.7688688,0],[-.038368,43.7687998,0],[-.0385668,43.7685711,0],[-.0387855,43.7682283,0],[-.0388388,43.7681195,0],[-.0388521,43.768057,0],[-.038845,43.7679685,0],[-.0388023,43.7678768,0],[-.0386831,43.767721,0],[-.0386228,43.767671,0],[-.0385678,43.7676388,0],[-.0379545,43.7674481,0],[-.0376631,43.767374,0],[-.0373005,43.7672578,0],[-.0370509,43.7671948,0],[-.0369093,43.7671715,0],[-.0366423,43.7670996,0],[-.0365621,43.7670888,0],[-.0365223,43.7670776,0],[-.036513,43.7670565,0],[-.036485,43.7670491,0],[-.0360436,43.7670081,0],[-.035805,43.7669695,0],[-.0355266,43.7669508,0],[-.0353886,43.7669253,0],[-.0352578,43.766874,0],[-.0351643,43.7668126,0],[-.0351191,43.7667715,0],[-.0350888,43.7667173,0],[-.0350796,43.7666605,0],[-.0350964,43.7665735,0],[-.0351258,43.7665083,0],[-.0351936,43.7664166,0],[-.0353065,43.7663121,0],[-.035408,43.7662426,0],[-.0355636,43.7661696,0],[-.0356316,43.7661556,0],[-.035742,43.7661553,0],[-.0358513,43.7661691,0],[-.0359956,43.7661983,0],[-.0360708,43.7662233,0]]]},properties:{name:"out_gps_nogMAIN",type:"Cycling"}}]};class fe extends p.exports.Component{constructor(){super(...arguments);l(this,"gpx",ge);l(this,"points",[[-.038333,43.7670631,5],[-.0383641,43.7670773,0],[-.0384355,43.7670778,0],[-.0387161,43.7671708,0],[-.0390553,43.7673015,0],[-.0391838,43.7673678,0],[-.0393128,43.767482,0],[-.0393648,43.7675436,0],[-.0394051,43.7676148,0],[-.0394266,43.7676649,0],[-.0394433,43.7677428,0],[-.039441,43.7678751,0],[-.0394301,43.7679163,0],[-.03939,43.7679958,0],[-.0392799,43.768153,0],[-.0389151,43.7686063,0],[-.0386111,43.7690158,0],[-.0385281,43.7691186,0],[-.0384705,43.7691745,0],[-.0384165,43.769214,0],[-.03835,43.7692471,0],[-.0382083,43.7692861,0],[-.0380865,43.7692946,0],[-.0379739,43.7692903,0],[-.0378016,43.7692678,0],[-.0376716,43.7692118,0],[-.037536,43.7691221,0],[-.0374096,43.769026,0],[-.0371731,43.7688671,0],[-.0367128,43.7685105,0],[-.0363385,43.7682691,0],[-.036181,43.768146,0],[-.035924,43.7679691,12],[-.0358156,43.7678603,12],[-.0357673,43.7677891,0],[-.0357576,43.7677128,0],[-.035776,43.7676471,0],[-.0357981,43.7676105,0],[-.035853,43.7675621,0],[-.0359396,43.7675215,0],[-.0360408,43.7675076,12],[-.0362601,43.7675086,12],[-.0365756,43.7675441,12],[-.036706,43.767586,12],[-.0368538,43.7676073,12],[-.0369638,43.7676451,0],[-.0370731,43.7677003,0],[-.0372155,43.7678048,0],[-.0373491,43.7680043,0],[-.0374818,43.7682841,0],[-.0375876,43.7684836,0],[-.0376726,43.7686793,0],[-.0377193,43.7687505,0],[-.0377833,43.7688175,0],[-.0378653,43.7688695,0],[-.0380011,43.768919,0],[-.0380515,43.7689258,0],[-.0381888,43.7689128,0],[-.0382335,43.7688996,0],[-.0382883,43.7688688,0],[-.038368,43.7687998,0],[-.0385668,43.7685711,0],[-.0387855,43.7682283,0],[-.0388388,43.7681195,0],[-.0388521,43.768057,0],[-.038845,43.7679685,0],[-.0388023,43.7678768,0],[-.0386831,43.767721,0],[-.0386228,43.767671,0],[-.0385678,43.7676388,0],[-.0379545,43.7674481,0],[-.0376631,43.767374,0],[-.0373005,43.7672578,0],[-.0370509,43.7671948,0],[-.0369093,43.7671715,0],[-.0366423,43.7670996,0],[-.0365621,43.7670888,0],[-.0365223,43.7670776,0],[-.036513,43.7670565,0],[-.036485,43.7670491,0],[-.0360436,43.7670081,0],[-.035805,43.7669695,0],[-.0355266,43.7669508,0],[-.0353886,43.7669253,0],[-.0352578,43.766874,0],[-.0351643,43.7668126,0],[-.0351191,43.7667715,0],[-.0350888,43.7667173,0],[-.0350796,43.7666605,0],[-.0350964,43.7665735,0],[-.0351258,43.7665083,0],[-.0351936,43.7664166,0],[-.0353065,43.7663121,0],[-.035408,43.7662426,0],[-.0355636,43.7661696,0],[-.0356316,43.7661556,0],[-.035742,43.7661553,0],[-.0358513,43.7661691,0],[-.0359956,43.7661983,0],[-.0360708,43.7662233,0]]);l(this,"i",0);l(this,"carIcon",L.icon({iconUrl:"./src/myAssets/car.png",iconSize:[15,15]}));l(this,"map");l(this,"layer");l(this,"mapWithPoints");l(this,"marker");l(this,"px",0);l(this,"py",0)}componentDidMount(){this.points.forEach(o=>{this.px+=o[1],this.py+=o[0]}),this.px=this.px/this.points.length,this.py=this.py/this.points.length,console.log(this.px,this.py),this.map=L.map("circuitMap").setView([this.px,this.py],17),L.tileLayer("").addTo(this.map),L.geoJSON(this.gpx).addTo(this.map).setStyle({color:"white",weight:4}),this.marker=L.marker([this.points[this.i%(this.points.length-1)][1],this.points[this.i%(this.points.length-1)][0]],{icon:this.carIcon}),this.myFunction()}myFunction(){setInterval(()=>{this.i++,this.marker.remove(),this.marker=L.marker([this.points[this.i%(this.points.length-1)][1],this.points[this.i%(this.points.length-1)][0]],{icon:this.carIcon}),this.marker.addTo(this.map)},50)}render(){return e("div",{className:"parentMap",children:e("div",{id:"circuitMap"})})}}function ve(){const[t,n]=p.exports.useState(!0),[o,c]=p.exports.useState(!0),[s,m]=p.exports.useState([]),[d,v]=p.exports.useState(0),[b,N]=p.exports.useState(0),[x,g]=p.exports.useState(0);p.exports.useEffect(()=>{let h=null;return t&&o===!1?h=setInterval(()=>{v(r=>r+10),g(r=>r+10)},10):clearInterval(h),()=>{clearInterval(h)}},[t,o]);const f=()=>{t?(n(!1),c(!0)):(n(!0),c(!1)),S()},w=()=>{d!=0&&(n(!0),s.push(d),S(),v(0))},S=()=>{const r=s.reduce((i,u)=>i+u,0)/s.length||0;N(r)},k=()=>{m([]),n(!1),v(0),N(0),g(0)};function M(h){s.splice(h,1),m(s),S(),g(s.reduce((r,i)=>r+i,0))}return a("div",{children:[a("div",{style:{textAlign:"center"},children:[e("button",{onClick:f,children:e(U,{size:50})}),"\u2003",e("button",{onClick:w,children:e($,{size:50})}),"\u2003",e("button",{onClick:k,children:e(K,{size:50})})]}),e("hr",{}),a("div",{className:"mainTimer",children:["LAP\u2003",a("span",{className:"timer",children:[("0"+Math.floor(d/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(d/1e3%60)).slice(-2)}),a("span",{className:"timerms",children:[".",("0"+d/10%100).slice(-2)]})]}),a("div",{className:"secondaryTimer",children:["AVG\u2003",a("span",{className:"timer",children:[("0"+Math.floor(b/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(b/1e3%60)).slice(-2)}),a("span",{className:"timerms",children:[".",("0"+b/10%100).slice(-2)]})]}),a("div",{className:"secondaryTimer",children:["TOT\u2003",a("span",{className:"timer",children:[("0"+Math.floor(x/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(x/1e3%60)).slice(-2)}),a("span",{className:"timerms",children:[".",("0"+x/10%100).slice(-2)]})]}),e("hr",{}),s.map((h,r)=>a("div",{style:{textAlign:"center"},children:[e("span",{className:"list",children:r}),a("span",{children:["\u2003",a("span",{className:"timer",children:[("0"+Math.floor(h/6e4%60)).slice(-2),":"]}),a("span",{className:"timer",children:[("0"+Math.floor(h/1e3%60)).slice(-2),"."]}),e("span",{className:"timerms",children:("0"+h/10%100).slice(-2)}),e("button",{onClick:()=>M(r),children:"R"})]})]},r))]})}var y;(function(t){t[t.check=1]="check",t[t.radialGauge=2]="radialGauge",t[t.linearGauge=3]="linearGauge",t[t.plot=4]="plot",t[t.circuitMap=5]="circuitMap",t[t.lapTimer=6]="lapTimer"})(y||(y={}));const be=({passedComp:t,onDelete:n})=>{const o={color:"red"},c={color:"black"},[s,m]=p.exports.useState([]),[d,v]=p.exports.useState(0),[b,N]=p.exports.useState(!1);let x=t.sensorSelected[0],g=[],f;const w=()=>{f=new E.Client("broker.mqttdashboard.com",Number(8e3),"/mqtt",x.sensorName+new Date().getTime()),f.onConnectionLost=k,f.onMessageArrived=M,f.connect({onSuccess:S,onFailure:h})};function S(){console.group("%c Creating a client for the following sensors:"+t.sensorSelected.map(r=>" "+String(r.sensorName)),"color: lightblue; font-weight: bold; font-size: 15px"),f==null&&console.log("Client undefined"),t.sensorSelected.forEach((r,i)=>{g.push(0),console.log("%c Connecting to the topic: "+r.topicName,"color: orange"),f.subscribe("H2polito/"+r.topicName,{})}),console.groupEnd(),m(g),N(!0)}function k(r){r.errorCode!==0&&console.error("onConnectionLost:"+r.errorMessage),console.groupEnd(),N(!1)}function M(r){console.log("Message arrived on destination: "+r.destinationName),t.sensorSelected.forEach((i,u)=>{"H2polito/"+i.topicName==r.destinationName&&(g[u]=JSON.parse(r.payloadString),console.log(i.topicName+" "+g[u]))}),v(g[0]),m(g)}function h(){console.error("Connection failed from "+x.sensorName),N(!1)}return p.exports.useEffect(()=>(w(),()=>{t.sensorSelected.map((r,i)=>{console.log("Unsubscribing H2polito/"+r.topicName),f.unsubscribe("H2polito/"+r.topicName,{})}),f.disconnect()}),[]),a("div",{className:"card dashboardElement",children:[a("div",{className:"card-header bg-transparent",children:[e("span",{className:"cards-title",children:t.nameComponent}),e("button",{type:"button",className:"float-right","aria-label":"Close",onClick:()=>n(t),children:e(Y,{size:20,style:o})}),e("button",{type:"button",className:"float-right",onClick:()=>w(),children:e(Q,{size:20,style:c})})]}),a("div",{className:"card-body",children:[t.typeComponent==1&&e("div",{className:"",children:e(he,{value:d,name:t.nameComponent})}),t.typeComponent==2&&e("div",{className:"basis-1/3",children:e(me,{value:d,minSpeed:t.cmpMinRange,maxSpeed:t.cmpMaxRange})}),t.typeComponent==3&&e("div",{className:"basis-full",children:e(pe,{value:d,minVal:t.cmpMinRange,maxVal:t.cmpMaxRange})}),t.typeComponent==4&&e("div",{className:"basis-full",children:e(ue,{passedData:s,minVal:t.cmpMinRange,sensorList:t.sensorSelected,id:t.compID,maxVal:t.cmpMaxRange})}),t.typeComponent==5&&e("div",{className:"basis-full",style:{height:"100%"},children:e(fe,{})}),t.typeComponent==6&&e("div",{className:"basis-full",style:{height:"100%"},children:e(ve,{})})]}),e("br",{}),b==!1&&e("div",{style:{display:"block"},className:"card-footer bg-red-200",children:t.sensorSelected.map((r,i)=>a("div",{children:[r.ID," - ",r.sensorName]},i))}),b==!0&&e("div",{style:{display:"block"},className:"card-footer bg-green-200",children:t.sensorSelected.map((r,i)=>a("div",{children:[r.ID," - ",r.sensorName]},i))})]})},xe=T.exports.WidthProvider(F),_=[{compType:y.check,w:3,h:3},{compType:y.radialGauge,w:3,h:8},{compType:y.linearGauge,w:6,h:6},{compType:y.plot,w:5,h:9},{compType:y.circuitMap,w:6,h:12},{compType:y.lapTimer,w:3,h:12}],Ne=({compPageList:t})=>{const[n,o]=p.exports.useState(t);let c=new P,s=t;const m=d=>{console.log("Deleting ");let v=t.findIndex(b=>b===d);console.log(v),s=t,console.log(s),o(t.splice(v,1))};return p.exports.useEffect(()=>{o(s),c.set("compPage",s)}),e("div",{children:e(xe,{rowHeight:50,cols:12,className:"layout",children:n.map((d,v)=>e("div",{"data-grid":{x:0,y:0,w:d.w,h:d.h},children:e(be,{passedComp:d,onDelete:m})},d.compID))})})};class ye extends C.Component{constructor(){super(...arguments);l(this,"listCookie");l(this,"componentsList");l(this,"deleteCookiess",()=>{console.log("Removing cookie"),this.listCookie.remove("compList")});l(this,"state",{indicatorList:[{ID:1,componentName:"Check Light"},{ID:2,componentName:"Radial Gauge"},{ID:3,componentName:"Linear Gauge"},{ID:4,componentName:"Plot"},{ID:5,componentName:"Circuit map"},{ID:6,componentName:"Lap timer"}],opt:[{value:{ID:"1",topicName:"Emergency",sensorName:"Emergency",minValue:1,maxValue:100},label:"Emergency"},{value:{ID:"2",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:100},label:"Speed"},{value:{ID:"3",topicName:"Temperature",sensorName:"Temperature",minValue:1,maxValue:100},label:"Temperature"},{value:{ID:"4",topicName:"FCVoltage",sensorName:"Fuel Cell Voltage",minValue:1,maxValue:100},label:"FCVoltage"},{value:{ID:"5",topicName:"SCVoltage",sensorName:"Supercap Voltage",minValue:1,maxValue:100},label:"SCVoltage"},{value:{ID:"6",topicName:"Strategy",sensorName:"Strategy",minValue:1,maxValue:100},label:"Strategy"},{value:{ID:"7",topicName:"MotorOn",sensorName:"Motor On",minValue:1,maxValue:100},label:"MotorOn"},{value:{ID:"8",topicName:"ActuationOn",sensorName:"Actuation On",minValue:1,maxValue:100},label:"ActuationOn"},{value:{ID:"9",topicName:"Purge",sensorName:"Purge On",minValue:1,maxValue:100},label:"Purge"},{value:{ID:"10",topicName:"PowerMode",sensorName:"Power Mode On",minValue:1,maxValue:100},label:"PowerMode"},{value:{ID:"11",topicName:"Short",sensorName:"Short On",minValue:1,maxValue:100},label:"Short"},{value:{ID:"12",topicName:"FCCurrent",sensorName:"Fuel Cell Current",minValue:1,maxValue:100},label:"FCCurrent"}]});l(this,"cmpID",0);l(this,"sensors");l(this,"handleChange",n=>{this.sensors=n});l(this,"onTrigger",()=>{this.props.parentCallback(this.componentsList)})}componentDidMount(){this.listCookie=new P,this.listCookie.get("compPage")!=null?this.componentsList=this.listCookie.get("compPage"):this.componentsList=[]}render(){return a("div",{className:"offcanvas offcanvas-end",id:"offcanvasRight",children:[e("div",{className:"offcanvas-header sidebar-title",children:e("h2",{children:"Sensor menu"})}),e("img",{src:"./s1.png",width:"50%",className:"center"}),a("div",{className:"offcanvas-body",children:[e("hr",{className:"my-4"}),e(X,{initialValues:{nameComponent:"",typeComponent:1,cmpMinRange:0,cmpMaxRange:100,sensorSelected:new Array,prescaler:1,deleted:!1,value:0,w:2,h:2},onSubmit:(n,o)=>{let c={};this.componentsList=this.listCookie.get("compPage"),c=n,c.compID=Z(),c.sensorSelected=new Array,c.sensorSelected=this.sensors.map(s=>s.value),c.w=_[c.typeComponent-1].w,c.h=_[c.typeComponent-1].h,c.cmpMinRange=n.cmpMinRange,c.cmpMaxRange=n.cmpMaxRange,this.componentsList.push(c),this.onTrigger(),o.resetForm(),setTimeout(()=>{},500)},children:a(ee,{children:[a("div",{className:"myFormGroup",children:[e("label",{children:"Select component"}),e(I,{component:"select",className:"form-select",id:"typeComponent",name:"typeComponent",children:this.state.indicatorList.map(n=>e("option",{value:n.ID,children:n.componentName},"Indicator"+n.ID))})]}),a("div",{className:"myFormGroup",children:[e("label",{children:"Select multi-sensor"}),e(te,{options:this.state.opt,onChange:this.handleChange,isMulti:!0,isClearable:!0,isSearchable:!0},`my_unique_select_key__${JSON.stringify(this.sensors)}`)]}),a("div",{className:"myFormGroup",children:[e("label",{children:"Select a name"}),e("div",{className:"input-group mb-3",children:e(I,{component:"input",className:"form-control",id:"nameComponent",name:"nameComponent",placeholder:"Select a sensor name"})})]}),e("hr",{className:"my-4"}),a("div",{className:"myFormGroup",children:[e("label",{children:"Insert Min and Max value on the scale"}),a("div",{className:"input-group mb-3",children:[e(I,{className:"form-control",id:"cmpMinRange",name:"cmpMinRange",placeholder:"Minimum range"}),e(I,{className:"form-control",id:"cmpMaxRange",name:"cmpMaxRange",placeholder:"Maximum range"})]})]}),a("div",{className:"myFormGroup",children:[e("label",{children:"Insert a prescaler"}),a(I,{component:"select",className:"form-select",id:"prescaler",name:"prescaler",children:[e("option",{value:1e3,children:"x1000"}),e("option",{value:100,children:"x100"}),e("option",{value:10,children:"x10"}),e("option",{defaultValue:1,children:"x1"}),e("option",{value:.1,children:"x0.1"}),e("option",{value:.01,children:"x0.01"}),e("option",{value:.001,children:"x0.001"})]})]}),e("input",{className:"btn btn-primary interactiveBtn",type:"submit",value:"Submit"})]})}),e("button",{className:"btn btn-primary interactiveBtn mt-1",onClick:this.deleteCookiess,children:"Remove cookies"})]})]})}}class Se extends p.exports.Component{render(){return e("nav",{className:"navbar navbar-expand-sm py-4  bg-slate-100 border-b-2 border-stone-200",children:a("div",{className:"container-fluid",children:[e("img",{src:"../logo_team.svg",alt:"Logo",height:80,width:80}),e("a",{className:"navbar-brand",href:"/",children:"H2politO telemetry"}),e("div",{className:"collapse navbar-collapse",id:"navbarNav",children:a("ul",{className:"navbar-nav",children:[e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/demo",children:e("p",{children:"Demo"})})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/",children:e("p",{children:"My dashboard"})})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/team",children:"Team"})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link disabled ",href:"/team",children:"Add sensors"})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link disabled",children:"Visualize past runs"})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/testing",children:e("p",{children:"Testing"})})})]})}),e("button",{className:"d-flex btn",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight",children:e(ne,{size:50})})]})})}}class we extends C.Component{constructor(n){super(n);l(this,"state",{outputList:new Array});l(this,"cookie",new P);l(this,"handleCallback",n=>{this.cookie.get("compPage")!=null?this.setState({outputList:n}):this.setState({outputList:n})});this.cookie.get("compPage")!=null?(console.log("%c Found the following cookies ","color: lihtyellow; font-weight: bold; font-size: 25px"),console.table(this.cookie.get("compPage")),this.state.outputList=this.cookie.get("compPage")):(console.log("Didn't find any cookie"),this.state.outputList=[])}render(){return a("div",{className:"bg-slate-600 flex flex-col min-h-screen justify-between",children:[e(Se,{}),e(ye,{parentCallback:this.handleCallback}),a("main",{className:"mb-auto mx-auto w-full",children:[a(ae,{children:[e(R,{path:"/testing",element:e(ie,{})}),e(R,{path:"/team",element:e(le,{})}),e(R,{path:"/",element:e(Ne,{compPageList:this.state.outputList})}),e(R,{path:"/demo",element:e(de,{})})]}),e("div",{className:"text-gray-400 fixed bottom-0 left-0",children:e("p",{children:"Made with \u2665 by Electronics (and Informatics) division"})})]})]})}}se.render(e(C.StrictMode,{children:e(oe,{children:e(we,{})})}),document.getElementById("root"));
