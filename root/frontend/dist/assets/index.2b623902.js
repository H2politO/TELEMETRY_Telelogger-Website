var j=Object.defineProperty;var W=(t,a,s)=>a in t?j(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var d=(t,a,s)=>(W(t,typeof a!="symbol"?a+"":a,s),s);import{j as P,r as c,P as M,I as q,R as I,a as J,b as R,c as U,d as $,e as O,_ as K,A as Y,f as Q,g as X,h as Z,i as ee,k as G,l as H,C as F,F as te,v as ae,m as ne,n as D,S as se,o as oe,p as re,q as E,s as ie,B as le}from"./vendor.3c6ab6b6.js";const ce=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}};ce();const e=P.exports.jsx,r=P.exports.jsxs,de=P.exports.Fragment,me=()=>{const[t,a]=c.exports.useState(!1),[s,i]=c.exports.useState(),[n,l]=c.exports.useState(""),[m,f]=c.exports.useState([]),[v,N]=c.exports.useState(!0),u=["H2_car"],b={};c.exports.useEffect(()=>{x()},[]);const x=()=>{const o=new M.Client("broker.mqttdashboard.com",Number(8e3),"/mqtt","myClientId"+new Date().getTime());o.onConnectionLost=V,o.onMessageArrived=k,o.connect({onSuccess:C}),i(o)},C=()=>{a(!0)},w=()=>{if(s==null||n==="")return;const o=new M.Message(n);o.destinationName="H2polito/Speed",console.log("Sending"),console.log(o.payloadString),s.send(o);let p=parseInt(n)+10;const S=new M.Message(JSON.stringify(p));S.destinationName="H2polito/Temperature",console.log("Sending"),console.log(S.payloadString),s.send(S),l("false");const A=new M.Message(JSON.stringify(!0));A.destinationName="H2polito/IdraStatus",console.log("Sending idra status"),console.log(A.payloadString),s.send(A),l(""),setTimeout(()=>{const T=new M.Message(JSON.stringify(!1));T.destinationName="H2polito/IdraStatus",console.log("Sending idra status 2 "+T.payloadString),s.send(T)},5e3)},V=o=>{o.errorCode!==0&&console.log("onConnectionLost: "+o.errorMessage),a(!1)},k=o=>{var p=o.payloadString;p=String(p),f(S=>[...S,p])},g=()=>{if(s!=null)for(var o=0;o<u.length;o++)s.subscribe(u[o],b)},h=o=>{console.log("Message"),l(o.target.value)};return r(de,{children:[e("main",{className:"mb-auto mx-auto",children:r("div",{className:"text-center text-white justify-center",children:[v&&r("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:['Keep this home page and the /dashboard ON in two separate windows. To make it work, select a component in the dashboard section, add its values and select the sensor "Luci" and once the component has been added, press the "reload" button. Now you can try to send a message to the broker "h2politoLuci". This value will show up on the sensors that selected luci as a sensor.',e("span",{className:"float-right",children:e("button",{onClick:()=>N(!1),children:"Close"})})]}),t===!1&&r("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Ops! "}),e("span",{className:"block sm:inline",children:"You are not connected!"})]}),t===!0&&r("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Connected! "}),e("span",{className:"block sm:inline",children:"You are connected to the server!"})]}),e("p",{className:"font-bold underline text-green-700",children:"Messages:"}),m.length===0&&r("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[e("strong",{className:"font-bold",children:"Ops! "}),e("span",{className:"block sm:inline",children:"There are no messages to show! Subscribe to a topic first then send a message to test :)"})]}),m.map((o,p)=>r("div",{className:"bg-stone-100 border border-stone-400 text-stone-700 px-4 py-3 rounded relative",role:"alert",children:[r("strong",{className:"font-bold",children:["Message ",p]}),e("br",{}),e("span",{className:"block sm:inline",children:o})]},p))]})}),r("footer",{className:"mb-5",children:[e("p",{children:e("input",{type:"text",value:n,onChange:h,className:"placeholder:italic placeholder:text-grey-400 block bg-white w-full border border-gray-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm",placeholder:"Write a Message..."})}),e("button",{className:"w-1/2 h-10 text-sm text-white bg-yellow-400 rounded-tl-full rounded-bl-full hover:bg-yellow-300",onClick:g,children:e("h1",{children:"Subscribe Topic"})}),e("button",{className:"w-1/2 h-10 text-sm text-white bg-yellow-400 rounded-tr-full rounded-br-full hover:bg-yellow-300",onClick:w,children:e("h1",{children:"Send Message"})})]})]})},pe=()=>e("div",{children:r("div",{className:"bg-stone-100 border border-stone-400 text-stone-700 px-4 py-3 rounded relative text-center",role:"alert",children:[e("strong",{className:"font-bold",children:"H2PolitO"}),e("br",{}),e("span",{className:"block sm:inline",children:"The idea of \u200B\u200Bforming a team for alternative propulsion vehicles at the Politecnico was born in 2006, but only in the autumn of 2007, under the strong ambition of a group of students and thanks to the indispensable help of eng. Giuliano Cozzari and the Faculty Advisor eng. Massimiliana Carello, turns into an operating team of 13 students, coming from 11 of the three-year degree courses. With the approval of the Rector of the Politectico, prof. Francesco Profumo and of the Head of Automotive Engineering, prof. Pietro Appendino, the project takes off."})]})});q.register();class ue extends I.Component{constructor(a){super(a);this.state={componentVisible:!0}}render(){return e("div",{children:r(J,{value:this.props.value,isNeedleDraggingEnabled:!1,isNeedleDraggingConstrained:!0,scaleStartExtent:.5,scaleEndExtent:.57,backingStrokeThickness:8,needleShape:"NeedleWithBulb",needleBrush:"#ff1230",needleOutline:"#9f9f9f",needleStrokeThickness:1,needlePivotShape:"CircleOverlay",needlePivotBrush:"#9f9f9f",needlePivotOutline:"#9f9f9f",needlePivotWidthRatio:.2,needlePivotStrokeThickness:1,height:"250px",minimumValue:this.props.minSpeed,maximumValue:this.props.maxSpeed,interval:(this.props.maxSpeed-this.props.minSpeed)/5,rangeBrushes:"#e3e3e3, #5bb551, #ffb638, red",rangeOutlines:"grey",children:[e(R,{name:"range1",startValue:this.props.minSpeed,endValue:.2*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(R,{name:"range2",startValue:.2*this.props.maxSpeed,endValue:.6*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(R,{name:"range3",startValue:.6*this.props.maxSpeed,endValue:.8*this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57}),e(R,{name:"range4",startValue:this.props.maxSpeed*.8,endValue:this.props.maxSpeed,innerStartExtent:.5,innerEndExtent:.5,outerStartExtent:.57,outerEndExtent:.57})]})})}}U.register();class he extends I.Component{constructor(a){super(a);this.state={componentVisible:!0}}render(){return e("div",{children:r($,{height:"120px",width:"100%",value:this.props.value,minimumValue:this.props.minVal,maximumValue:this.props.maxVal,interval:10,isScaleInverted:!1,backingOuterExtent:"Transparent",rangeBrushes:"#a4bd29, #F86232",rangeOutlines:"#a4bd29, #F86232",scaleEndExtent:.95,children:[e(O,{name:"range1",startValue:this.props.minVal,endValue:this.props.maxVal*.7,innerStartExtent:.075,innerEndExtent:.075,outerStartExtent:.25,outerEndExtent:.4}),e(O,{name:"range2",startValue:this.props.maxVal*.7,endValue:this.props.maxVal,innerStartExtent:.075,innerEndExtent:.075,outerStartExtent:.4,outerEndExtent:.55})]})})}}class ge extends I.Component{constructor(a){super(a)}render(){return e("div",{children:this.props.comp.sensorSelected.map((a,s)=>e("div",{children:e("div",{className:"led-box",children:e("div",{className:this.props.value[s]!=0?"led-green led-component":"led-red led-component"})})}))})}}class fe extends c.exports.Component{constructor(a){super(a);d(this,"myData",[]);d(this,"state",{avg:0,options:{chart:{height:"100%",id:this.props.id,animations:{enabled:!0,easing:"linear",speed:1,dynamicAnimation:{enabled:!0,speed:50}},toolbar:{show:!1},zoom:{enabled:!1}},annotations:{yaxis:[{y:0,borderColor:"blue",label:{borderColor:"#00E396",style:{color:"#fff",background:"#00E396"},text:"Averge"}}]},xaxis:{type:"numeric",range:100},yaxis:{max:Number(this.props.maxVal),min:Number(this.props.minVal)},stroke:{curve:"smooth"}},series:this.props.sensorList.map(a=>({name:a.sensorName,data:[]})),newData:this.props.passedData});d(this,"idInt");d(this,"allData",[])}componentDidMount(){this.props.sensorList.forEach((a,s)=>{this.allData[s]=[]}),this.idInt=setInterval(()=>{this.state.avg=this.allData[0].reduce((a,s)=>a+s,0)/this.allData[0].length,this.allData.forEach((a,s)=>{this.state.avg=this.allData[0].reduce((i,n)=>i+n,0)/this.allData[0].length,this.state.options.annotations.yaxis[0].y=this.state.avg,a.push(this.props.passedData[s]),a.length>100&&a.shift()}),ApexCharts.exec(this.props.id,"updateSeries",this.allData.map((a,s)=>({data:this.allData[s]})))},500)}componentWillUnmount(){console.log("Unmount graph"),clearInterval(this.idInt)}render(){return e("div",{className:"app",children:e("div",{className:"row",children:e("div",{className:"mixed-chart",children:e(K,{options:this.state.options,series:this.state.series,type:"line",width:"100%"})})})})}}var ve="/assets/carA.7c09f4ad.png";const be={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiLineString",coordinates:[[[-.038333,43.7670631,5],[-.0383641,43.7670773,0],[-.0384355,43.7670778,0],[-.0387161,43.7671708,0],[-.0390553,43.7673015,0],[-.0391838,43.7673678,0],[-.0393128,43.767482,0],[-.0393648,43.7675436,0],[-.0394051,43.7676148,0],[-.0394266,43.7676649,0],[-.0394433,43.7677428,0],[-.039441,43.7678751,0],[-.0394301,43.7679163,0],[-.03939,43.7679958,0],[-.0392799,43.768153,0],[-.0389151,43.7686063,0],[-.0386111,43.7690158,0],[-.0385281,43.7691186,0],[-.0384705,43.7691745,0],[-.0384165,43.769214,0],[-.03835,43.7692471,0],[-.0382083,43.7692861,0],[-.0380865,43.7692946,0],[-.0379739,43.7692903,0],[-.0378016,43.7692678,0],[-.0376716,43.7692118,0],[-.037536,43.7691221,0],[-.0374096,43.769026,0],[-.0371731,43.7688671,0],[-.0367128,43.7685105,0],[-.0363385,43.7682691,0],[-.036181,43.768146,0],[-.035924,43.7679691,12],[-.0358156,43.7678603,12],[-.0357673,43.7677891,0],[-.0357576,43.7677128,0],[-.035776,43.7676471,0],[-.0357981,43.7676105,0],[-.035853,43.7675621,0],[-.0359396,43.7675215,0],[-.0360408,43.7675076,12],[-.0362601,43.7675086,12],[-.0365756,43.7675441,12],[-.036706,43.767586,12],[-.0368538,43.7676073,12],[-.0369638,43.7676451,0],[-.0370731,43.7677003,0],[-.0372155,43.7678048,0],[-.0373491,43.7680043,0],[-.0374818,43.7682841,0],[-.0375876,43.7684836,0],[-.0376726,43.7686793,0],[-.0377193,43.7687505,0],[-.0377833,43.7688175,0],[-.0378653,43.7688695,0],[-.0380011,43.768919,0],[-.0380515,43.7689258,0],[-.0381888,43.7689128,0],[-.0382335,43.7688996,0],[-.0382883,43.7688688,0],[-.038368,43.7687998,0],[-.0385668,43.7685711,0],[-.0387855,43.7682283,0],[-.0388388,43.7681195,0],[-.0388521,43.768057,0],[-.038845,43.7679685,0],[-.0388023,43.7678768,0],[-.0386831,43.767721,0],[-.0386228,43.767671,0],[-.0385678,43.7676388,0],[-.0379545,43.7674481,0],[-.0376631,43.767374,0],[-.0373005,43.7672578,0],[-.0370509,43.7671948,0],[-.0369093,43.7671715,0],[-.0366423,43.7670996,0],[-.0365621,43.7670888,0],[-.0365223,43.7670776,0],[-.036513,43.7670565,0],[-.036485,43.7670491,0],[-.0360436,43.7670081,0],[-.035805,43.7669695,0],[-.0355266,43.7669508,0],[-.0353886,43.7669253,0],[-.0352578,43.766874,0],[-.0351643,43.7668126,0],[-.0351191,43.7667715,0],[-.0350888,43.7667173,0],[-.0350796,43.7666605,0],[-.0350964,43.7665735,0],[-.0351258,43.7665083,0],[-.0351936,43.7664166,0],[-.0353065,43.7663121,0],[-.035408,43.7662426,0],[-.0355636,43.7661696,0],[-.0356316,43.7661556,0],[-.035742,43.7661553,0],[-.0358513,43.7661691,0],[-.0359956,43.7661983,0],[-.0360708,43.7662233,0]]]},properties:{name:"out_gps_nogMAIN",type:"Cycling"}}]};class _ extends c.exports.Component{constructor(){super(...arguments);d(this,"gpx",be);d(this,"points",[[-.038333,43.7670631,5],[-.0383641,43.7670773,0],[-.0384355,43.7670778,0],[-.0387161,43.7671708,0],[-.0390553,43.7673015,0],[-.0391838,43.7673678,0],[-.0393128,43.767482,0],[-.0393648,43.7675436,0],[-.0394051,43.7676148,0],[-.0394266,43.7676649,0],[-.0394433,43.7677428,0],[-.039441,43.7678751,0],[-.0394301,43.7679163,0],[-.03939,43.7679958,0],[-.0392799,43.768153,0],[-.0389151,43.7686063,0],[-.0386111,43.7690158,0],[-.0385281,43.7691186,0],[-.0384705,43.7691745,0],[-.0384165,43.769214,0],[-.03835,43.7692471,0],[-.0382083,43.7692861,0],[-.0380865,43.7692946,0],[-.0379739,43.7692903,0],[-.0378016,43.7692678,0],[-.0376716,43.7692118,0],[-.037536,43.7691221,0],[-.0374096,43.769026,0],[-.0371731,43.7688671,0],[-.0367128,43.7685105,0],[-.0363385,43.7682691,0],[-.036181,43.768146,0],[-.035924,43.7679691,12],[-.0358156,43.7678603,12],[-.0357673,43.7677891,0],[-.0357576,43.7677128,0],[-.035776,43.7676471,0],[-.0357981,43.7676105,0],[-.035853,43.7675621,0],[-.0359396,43.7675215,0],[-.0360408,43.7675076,12],[-.0362601,43.7675086,12],[-.0365756,43.7675441,12],[-.036706,43.767586,12],[-.0368538,43.7676073,12],[-.0369638,43.7676451,0],[-.0370731,43.7677003,0],[-.0372155,43.7678048,0],[-.0373491,43.7680043,0],[-.0374818,43.7682841,0],[-.0375876,43.7684836,0],[-.0376726,43.7686793,0],[-.0377193,43.7687505,0],[-.0377833,43.7688175,0],[-.0378653,43.7688695,0],[-.0380011,43.768919,0],[-.0380515,43.7689258,0],[-.0381888,43.7689128,0],[-.0382335,43.7688996,0],[-.0382883,43.7688688,0],[-.038368,43.7687998,0],[-.0385668,43.7685711,0],[-.0387855,43.7682283,0],[-.0388388,43.7681195,0],[-.0388521,43.768057,0],[-.038845,43.7679685,0],[-.0388023,43.7678768,0],[-.0386831,43.767721,0],[-.0386228,43.767671,0],[-.0385678,43.7676388,0],[-.0379545,43.7674481,0],[-.0376631,43.767374,0],[-.0373005,43.7672578,0],[-.0370509,43.7671948,0],[-.0369093,43.7671715,0],[-.0366423,43.7670996,0],[-.0365621,43.7670888,0],[-.0365223,43.7670776,0],[-.036513,43.7670565,0],[-.036485,43.7670491,0],[-.0360436,43.7670081,0],[-.035805,43.7669695,0],[-.0355266,43.7669508,0],[-.0353886,43.7669253,0],[-.0352578,43.766874,0],[-.0351643,43.7668126,0],[-.0351191,43.7667715,0],[-.0350888,43.7667173,0],[-.0350796,43.7666605,0],[-.0350964,43.7665735,0],[-.0351258,43.7665083,0],[-.0351936,43.7664166,0],[-.0353065,43.7663121,0],[-.035408,43.7662426,0],[-.0355636,43.7661696,0],[-.0356316,43.7661556,0],[-.035742,43.7661553,0],[-.0358513,43.7661691,0],[-.0359956,43.7661983,0],[-.0360708,43.7662233,0]]);d(this,"i",0);d(this,"carIcon",L.icon({iconUrl:ve,iconSize:[15,15]}));d(this,"map");d(this,"layer");d(this,"mapWithPoints");d(this,"marker");d(this,"px",0);d(this,"py",0)}componentDidMount(){this.points.forEach(s=>{this.px+=s[1],this.py+=s[0]}),this.px=this.px/this.points.length,this.py=this.py/this.points.length,console.log(this.px,this.py),this.map=L.map("circuitMap").setView([this.px,this.py],17),L.geoJSON(this.gpx).addTo(this.map).setStyle({color:"white",weight:4}),this.marker=L.marker([this.points[this.i%(this.points.length-1)][1],this.points[this.i%(this.points.length-1)][0]],{icon:this.carIcon}),this.myFunction()}myFunction(){setInterval(()=>{this.i++,this.marker.remove(),this.marker=L.marker([this.points[this.i%(this.points.length-1)][1],this.points[this.i%(this.points.length-1)][0]],{icon:this.carIcon}),this.marker.addTo(this.map)},50)}render(){return e("div",{className:"parentMap",children:e("div",{id:"circuitMap"})})}}function xe(){const[t,a]=c.exports.useState(!0),[s,i]=c.exports.useState(!0),[n,l]=c.exports.useState([]),[m,f]=c.exports.useState(0),[v,N]=c.exports.useState(0),[u,b]=c.exports.useState(0);c.exports.useEffect(()=>{let g=null;return t&&s===!1?g=setInterval(()=>{f(h=>h+10),b(h=>h+10)},10):clearInterval(g),()=>{clearInterval(g)}},[t,s]);const x=()=>{t?(a(!1),i(!0)):(a(!0),i(!1)),w()},C=()=>{m!=0&&(a(!0),n.push(m),w(),f(0))},w=()=>{const h=n.reduce((o,p)=>o+p,0)/n.length||0;N(h)},V=()=>{l([]),a(!1),f(0),N(0),b(0)};function k(g){n.splice(g,1),l(n),w(),b(n.reduce((h,o)=>h+o,0))}return r("div",{children:[r("div",{style:{textAlign:"center"},children:[e("button",{onClick:x,children:e(Y,{size:50})}),"\u2003",e("button",{onClick:C,children:e(Q,{size:50})}),"\u2003",e("button",{onClick:V,children:e(X,{size:50})})]}),e("hr",{}),r("div",{className:"mainTimer",children:["LAP\u2003",r("span",{className:"timer",children:[("0"+Math.floor(m/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(m/1e3%60)).slice(-2)}),r("span",{className:"timerms",children:[".",("0"+m/10%100).slice(-2)]})]}),r("div",{className:"secondaryTimer",children:["AVG\u2003",r("span",{className:"timer",children:[("0"+Math.floor(v/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(v/1e3%60)).slice(-2)}),r("span",{className:"timerms",children:[".",("0"+v/10%100).slice(-2)]})]}),r("div",{className:"secondaryTimer",children:["TOT\u2003",r("span",{className:"timer",children:[("0"+Math.floor(u/6e4%60)).slice(-2),":"]}),e("span",{className:"timer",children:("0"+Math.floor(u/1e3%60)).slice(-2)}),r("span",{className:"timerms",children:[".",("0"+u/10%100).slice(-2)]})]}),e("hr",{}),n.map((g,h)=>r("div",{style:{textAlign:"center"},children:[e("span",{className:"list",children:h}),r("span",{children:["\u2003",r("span",{className:"timer",children:[("0"+Math.floor(g/6e4%60)).slice(-2),":"]}),r("span",{className:"timer",children:[("0"+Math.floor(g/1e3%60)).slice(-2),"."]}),e("span",{className:"timerms",children:("0"+g/10%100).slice(-2)}),e("button",{onClick:()=>k(h),children:"R"})]})]},h))]})}const Ne=({sendData:t})=>{const[a,s]=c.exports.useState("");return r("div",{children:[r("form",{onSubmit:n=>{n.preventDefault(),t(a)},children:[e("input",{type:"text",onChange:n=>s(n.target.value)}),e("button",{type:"button"})]}),a]})};var y;(function(t){t[t.check=1]="check",t[t.radialGauge=2]="radialGauge",t[t.linearGauge=3]="linearGauge",t[t.plot=4]="plot",t[t.circuitMap=5]="circuitMap",t[t.lapTimer=6]="lapTimer",t[t.messageSender=7]="messageSender"})(y||(y={}));const z=({passedComp:t,onDelete:a})=>{const s={color:"red"},i={color:"black"},[n,l]=c.exports.useState([]),[m,f]=c.exports.useState(0),[v,N]=c.exports.useState(!1);let u=t.sensorSelected[0],b=[],x=new M.Client("broker.mqttdashboard.com",Number(8e3),"/mqtt",u.sensorName+new Date().getTime());const C=()=>{x.onConnectionLost=V,x.onMessageArrived=k,x.connect({onSuccess:w,onFailure:g})};function w(){console.group("%c Creating a client for the following sensors:"+t.sensorSelected.map(o=>" "+String(o.sensorName)),"color: lightblue; font-weight: bold; font-size: 15px"),x==null&&console.log("Client undefined"),t.sensorSelected.forEach((o,p)=>{b.push(0),console.log("%c Connecting to the topic: H2polito/"+o.topicName,"color: orange"),x.subscribe("H2polito/"+o.topicName,{})}),console.groupEnd(),l(b),N(!0)}function V(o){o.errorCode!==0&&console.error("onConnectionLost:"+o.errorMessage),console.groupEnd(),N(!1)}function k(o){console.log("Message arrived on destination: "+o.destinationName),t.sensorSelected.forEach((p,S)=>{"H2polito/"+p.topicName==o.destinationName&&(b[S]=JSON.parse(o.payloadString),console.log(p.topicName+" "+b[S]))}),f(b[0]),l(b)}function g(){console.error("Connection failed from "+u.sensorName),N(!1)}const h=o=>{console.log("Sending the following message: "+o);const p=new M.Message(o);p.destinationName="H2polito/Messaging",x.send(p)};return c.exports.useEffect(()=>(C(),()=>{t.sensorSelected.map((o,p)=>{console.log("Unsubscribing H2polito/"+o.topicName),x.unsubscribe("H2polito/"+o.topicName,{})}),x.disconnect()}),[]),r("div",{className:"card dashboardElement",children:[window.location.pathname=="/"&&r("div",{className:"card-header bg-transparent",children:[e("span",{className:"cards-title",children:t.nameComponent}),e("button",{type:"button",className:"float-right","aria-label":"Close",onClick:()=>a(t),children:e(Z,{size:20,style:s})}),e("button",{type:"button",className:"float-right",onClick:()=>C(),children:e(ee,{size:20,style:i})})]}),r("div",{className:"card-body",children:[t.typeComponent==1&&e("div",{className:"",children:e(ge,{value:n,comp:t})}),t.typeComponent==2&&e("div",{className:"basis-1/3",children:e(ue,{value:m,minSpeed:t.cmpMinRange,maxSpeed:t.cmpMaxRange})}),t.typeComponent==3&&e("div",{className:"basis-full",children:e(he,{value:m,minVal:t.cmpMinRange,maxVal:t.cmpMaxRange})}),t.typeComponent==4&&e("div",{className:"basis-full",children:e(fe,{passedData:n,minVal:t.cmpMinRange,sensorList:t.sensorSelected,id:t.compID,maxVal:t.cmpMaxRange})}),t.typeComponent==5&&e("div",{className:"basis-full",style:{height:"100%"},children:e(_,{})}),t.typeComponent==6&&e("div",{className:"basis-full",style:{height:"100%"},children:e(xe,{})}),t.typeComponent==7&&e("div",{children:e(Ne,{sendData:h})})]}),e("br",{}),v==!1&&e("div",{style:{display:"block"},className:"card-footer bg-red-200",children:t.sensorSelected.map((o,p)=>r("div",{children:[o.ID," - ",o.sensorName]},p))}),v==!0&&e("div",{style:{display:"block"},className:"card-footer bg-green-200",children:t.sensorSelected.map((o,p)=>r("div",{children:[o.ID," - ",o.sensorName]},p))})]})},ye=G.exports.WidthProvider(H),Se=t=>e("div",{children:e(ye,{rowHeight:50,cols:12,className:"layout",margin:[5,5],isDraggable:!1,isResizable:!1,children:[{compID:"1",nameComponent:"",typeComponent:3,cmpMinRange:0,cmpMaxRange:50,sensorSelected:[{ID:"1",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:50}],prescaler:1,deleted:!1,value:0,w:4,h:5,x:0,y:0},{compID:"2",nameComponent:"",typeComponent:5,cmpMinRange:0,cmpMaxRange:100,sensorSelected:[{ID:"2",topicName:"Map",sensorName:"Speed",minValue:1,maxValue:100}],prescaler:1,deleted:!1,value:0,w:2,h:8,x:10,y:0},{compID:"3",nameComponent:"Velocit\xE1",typeComponent:2,cmpMinRange:0,cmpMaxRange:40,sensorSelected:[{ID:"3",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:40}],prescaler:1,deleted:!1,value:0,w:2,h:7,x:0,y:6},{nameComponent:"ASD",typeComponent:4,cmpMinRange:0,cmpMaxRange:100,sensorSelected:[{ID:"2",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:100},{ID:"3",topicName:"Temperature",sensorName:"Temperature",minValue:1,maxValue:100},{ID:"4",topicName:"FCVoltage",sensorName:"Fuel Cell Voltage",minValue:1,maxValue:100}],prescaler:1,deleted:!1,value:0,w:4,h:10,compID:"61200ef3-dc36-4f25-ab8b-42a9e0b9d496",x:6,y:0},{nameComponent:"",typeComponent:6,cmpMinRange:0,cmpMaxRange:100,sensorSelected:[{ID:"13",topicName:"Messaging",sensorName:"Messaging client",minValue:1,maxValue:100}],prescaler:1,deleted:!1,value:0,w:2,h:10,compID:"713b1eb5-3032-44e5-b054-219a022d0e4b",x:4,y:6}].map((s,i)=>e("div",{"data-grid":{x:s.x,y:s.y,w:s.w,h:s.h},children:e(z,{passedComp:s,onDelete:null})},s.compID))})}),Me=G.exports.WidthProvider(H),B=[{compType:y.check,w:3,h:3},{compType:y.radialGauge,w:3,h:8},{compType:y.linearGauge,w:6,h:6},{compType:y.plot,w:5,h:9},{compType:y.circuitMap,w:3,h:9},{compType:y.lapTimer,w:3,h:12},{compType:y.messageSender,w:3,h:12}],we=({compPageList:t})=>{const[a,s]=c.exports.useState(t);let i=new F,n=t;const l=m=>{console.log("Deleting ");let f=t.findIndex(v=>v===m);console.log(f),n=t,console.log(n),s(t.splice(f,1))};return c.exports.useEffect(()=>{s(n),i.set("compPage",n,{maxAge:60*60*24*365})}),e("div",{children:e(Me,{rowHeight:50,cols:12,compactType:"vertical",children:a.map((m,f)=>e("div",{"data-grid":{x:0,y:0,w:m.w,h:m.h},children:e(z,{passedComp:m,onDelete:l})},m.compID))})})},Ce=()=>e(_,{});var Ie="/assets/sensor.2716a53a.png";class Ve extends I.Component{constructor(){super(...arguments);d(this,"listCookie");d(this,"componentsList");d(this,"state",{indicatorList:[{ID:1,componentName:"Check Light"},{ID:2,componentName:"Radial Gauge"},{ID:3,componentName:"Linear Gauge"},{ID:4,componentName:"Plot"},{ID:5,componentName:"Circuit map"},{ID:6,componentName:"Lap timer"},{ID:7,componentName:"Message Sender"}],opt:[{value:{ID:"1",topicName:"Emergency",sensorName:"Emergency",minValue:1,maxValue:100},label:"Emergency"},{value:{ID:"2",topicName:"Speed",sensorName:"Speed",minValue:1,maxValue:100},label:"Speed"},{value:{ID:"3",topicName:"Temperature",sensorName:"Temperature",minValue:1,maxValue:100},label:"Temperature"},{value:{ID:"4",topicName:"FCVoltage",sensorName:"Fuel Cell Voltage",minValue:1,maxValue:100},label:"FCVoltage"},{value:{ID:"5",topicName:"SCVoltage",sensorName:"Supercap Voltage",minValue:1,maxValue:100},label:"SCVoltage"},{value:{ID:"6",topicName:"Strategy",sensorName:"Strategy",minValue:1,maxValue:100},label:"Strategy"},{value:{ID:"7",topicName:"MotorOn",sensorName:"Motor On",minValue:1,maxValue:100},label:"MotorOn"},{value:{ID:"8",topicName:"ActuationOn",sensorName:"Actuation On",minValue:1,maxValue:100},label:"ActuationOn"},{value:{ID:"9",topicName:"Purge",sensorName:"Purge On",minValue:1,maxValue:100},label:"Purge"},{value:{ID:"10",topicName:"PowerMode",sensorName:"Power Mode On",minValue:1,maxValue:100},label:"PowerMode"},{value:{ID:"11",topicName:"Short",sensorName:"Short On",minValue:1,maxValue:100},label:"Short"},{value:{ID:"12",topicName:"FCCurrent",sensorName:"Fuel Cell Current",minValue:1,maxValue:100},label:"FCCurrent"},{value:{ID:"13",topicName:"Messaging",sensorName:"Messaging client",minValue:1,maxValue:100},label:"Messaging"}]});d(this,"cmpID",0);d(this,"sensors");d(this,"handleChange",a=>{this.sensors=a});d(this,"onTrigger",()=>{this.props.parentCallback(this.componentsList)})}componentDidMount(){this.listCookie=new F,this.listCookie.get("compPage")!=null?this.componentsList=this.listCookie.get("compPage"):this.componentsList=[]}render(){return r("div",{className:"offcanvas offcanvas-end",id:"offcanvasRight",children:[e("img",{src:Ie,className:"sensorImage"}),r("div",{className:"offcanvas-body",children:[e("hr",{className:"my-4"}),e(te,{initialValues:{nameComponent:"",typeComponent:1,cmpMinRange:0,cmpMaxRange:100,sensorSelected:new Array,prescaler:1,deleted:!1,value:0,w:2,h:2},onSubmit:(a,s)=>{let i={};this.componentsList=this.listCookie.get("compPage"),i=a,i.compID=ae(),i.sensorSelected=new Array,i.sensorSelected=this.sensors.map(n=>n.value),i.w=B[i.typeComponent-1].w,i.h=B[i.typeComponent-1].h,i.cmpMinRange=a.cmpMinRange,i.cmpMaxRange=a.cmpMaxRange,this.componentsList.push(i),this.onTrigger(),s.resetForm(),setTimeout(()=>{},500)},children:r(ne,{children:[r("div",{className:"myFormGroup",children:[e("label",{children:"Select component"}),e(D,{component:"select",className:"form-select",id:"typeComponent",name:"typeComponent",children:this.state.indicatorList.map(a=>e("option",{value:a.ID,children:a.componentName},"Indicator"+a.ID))})]}),r("div",{className:"myFormGroup",children:[e("label",{children:"Select multi-sensor"}),e(se,{options:this.state.opt,onChange:this.handleChange,isMulti:!0,isClearable:!0,isSearchable:!0},`my_unique_select_key__${JSON.stringify(this.sensors)}`)]}),r("div",{className:"myFormGroup",children:[e("label",{children:"Select a name"}),e("div",{className:"input-group mb-3",children:e(D,{component:"input",className:"form-control",id:"nameComponent",name:"nameComponent",placeholder:"Select a sensor name"})})]}),e("hr",{className:"my-4"}),r("div",{className:"myFormGroup",children:[e("label",{children:"Insert Min and Max value on the scale"}),r("div",{className:"input-group mb-3",children:[e(D,{className:"form-control",id:"cmpMinRange",name:"cmpMinRange",placeholder:"Minimum range"}),e(D,{className:"form-control",id:"cmpMaxRange",name:"cmpMaxRange",placeholder:"Maximum range"})]})]}),r("div",{className:"myFormGroup",children:[e("label",{children:"Insert a prescaler"}),r(D,{component:"select",className:"form-select",id:"prescaler",name:"prescaler",children:[e("option",{value:1e3,children:"x1000"}),e("option",{value:100,children:"x100"}),e("option",{value:10,children:"x10"}),e("option",{defaultValue:1,children:"x1"}),e("option",{value:.1,children:"x0.1"}),e("option",{value:.01,children:"x0.01"}),e("option",{value:.001,children:"x0.001"})]})]}),e("input",{className:"btn btn-primary interactiveBtn",type:"submit",value:"Submit"})]})})]})]})}}var ke="/assets/idra.377839b8.png",De="/assets/juno.5f587534.png",Ee="/assets/logoTeam.ad1ec335.svg";const Le=()=>{const[t,a]=c.exports.useState(!1);c.exports.useState(!1);const[s,i]=c.exports.useState(!1);let n=new M.Client("broker.mqttdashboard.com",Number(8e3),"/mqtt","navBar"+new Date().getTime());c.exports.useEffect(()=>{l()},[]);const l=()=>{n.onConnectionLost=f,n.onMessageArrived=N,n.connect({onSuccess:m,onFailure:v})};function m(){n==null&&console.log("Client undefined"),n.subscribe("H2polito/IdraStatus"),console.log("Navbar connected")}function f(u){u.errorCode!==0&&console.error("onConnectionLost:"+u.errorMessage)}function v(){console.error("Connection failed from navbar"),setInterval(()=>{l()},1e3)}function N(u){u.destinationName==="H2polito/IdraStatus"&&a(u.payloadString==="true"),u.destinationName==="H2polito/junoStatus"&&i(u.payloadString==="true")}return e("nav",{className:"navbar navbar-expand-sm py-4  bg-slate-100 border-b-2 border-stone-200",children:r("div",{className:"container-fluid",children:[e("img",{src:Ee,alt:"Logo",height:80,width:80}),e("a",{className:"navbar-brand",href:"/",children:"H2politO telemetry"}),e("div",{className:"collapse navbar-collapse",id:"navbarNav",children:r("ul",{className:"navbar-nav",children:[e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/demo",children:e("p",{children:"Demo"})})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/",children:e("p",{children:"My dashboard"})})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/team",children:"Team"})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link disabled ",href:"/team",children:"Add sensors"})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active",href:"/analysis",children:"Analysis "})}),e("li",{className:"nav-item",children:e("a",{className:"nav-link active","aria-current":"page",href:"/testing",children:e("p",{children:"Testing"})})})]})}),e("div",{className:"led-box",children:e("div",{className:t?"led-green":"led-red"})}),e("div",{className:"nav-item",children:e("img",{src:ke,style:{height:"100px"},className:"carImages"})}),e("div",{className:"led-box",children:e("div",{className:s?"led-green":"led-red"})}),e("div",{className:"nav-item",children:e("img",{src:De,style:{height:"100px"},className:"carImages"})}),window.location.pathname=="/dashboard"||window.location.pathname=="/"&&e("button",{className:"d-flex btn",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight",children:e(oe,{size:50})})]})})};class Re extends I.Component{constructor(a){super(a);d(this,"state",{outputList:new Array});d(this,"cookie",new F);d(this,"handleCallback",a=>{this.cookie.get("compPage")!=null?this.setState({outputList:a}):this.setState({outputList:a})});this.cookie.get("compPage")!=null?(console.log("%c Found the following cookies ","color: lihtyellow; font-weight: bold; font-size: 25px"),console.table(this.cookie.get("compPage")),this.state.outputList=this.cookie.get("compPage")):(console.log("Didn't find any cookie"),this.state.outputList=[])}render(){return r("div",{className:"bg-slate-600 flex flex-col min-h-screen justify-between backgroundImage",children:[e(Le,{}),e(Ve,{parentCallback:this.handleCallback}),r("main",{className:"mb-auto mx-auto w-full",children:[r(re,{children:[e(E,{path:"/testing",element:e(me,{})}),e(E,{path:"/team",element:e(pe,{})}),e(E,{path:"/",element:e(we,{compPageList:this.state.outputList})}),e(E,{path:"/demo",element:e(Se,{})}),e(E,{path:"/analysis",element:e(Ce,{})})]}),e("div",{className:"text-gray-400 fixed bottom-0 left-0",children:e("p",{children:"Made with \u2665 by Electronics (and Informatics) division"})})]})]})}}ie.render(e(I.StrictMode,{children:e(le,{children:e(Re,{})})}),document.getElementById("root"));
